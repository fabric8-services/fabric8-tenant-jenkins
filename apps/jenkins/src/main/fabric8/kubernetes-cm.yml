metadata:
  name: jenkins
  annotations:
    expose.service-key.config.fabric8.io/keycloak: keycloak.url
    fabric8.io/target-platform: "kubernetes"
data:
  keycloak.url: ${KEYCLOAK_URL}
  org.jenkinsci.plugins.updatebot.GlobalPluginConfiguration.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <org.jenkinsci.plugins.updatebot.GlobalPluginConfiguration plugin="updatebot@1.0.0-SNAPSHOT">
      <credentialsId>cd-github</credentialsId>
      <useAnsiColor>true</useAnsiColor>
      <jenkinsfileLibraryGitCloneURL></jenkinsfileLibraryGitCloneURL>
    </org.jenkinsci.plugins.updatebot.GlobalPluginConfiguration>
  hudson.tasks.Maven.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <hudson.tasks.Maven_-DescriptorImpl>
      <installations>
        <hudson.tasks.Maven_-MavenInstallation>
          <name>maven</name>
          <properties>
            <hudson.tools.InstallSourceProperty>
              <installers>
                <hudson.tasks.Maven_-MavenInstaller>
                  <id>3.5.0</id>
                </hudson.tasks.Maven_-MavenInstaller>
              </installers>
            </hudson.tools.InstallSourceProperty>
          </properties>
        </hudson.tasks.Maven_-MavenInstallation>
      </installations>
    </hudson.tasks.Maven_-DescriptorImpl
  jenkins.plugins.nodejs.tools.NodeJSInstallation.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <jenkins.plugins.nodejs.tools.NodeJSInstallation_-DescriptorImpl plugin="nodejs@1.2.4">
      <installations class="jenkins.plugins.nodejs.tools.NodeJSInstallation-array">
        <jenkins.plugins.nodejs.tools.NodeJSInstallation>
          <name>nodejs</name>
          <properties>
            <hudson.tools.InstallSourceProperty>
              <installers>
                <jenkins.plugins.nodejs.tools.NodeJSInstaller>
                  <id>8.6.0</id>
                  <npmPackagesRefreshHours>72</npmPackagesRefreshHours>
                </jenkins.plugins.nodejs.tools.NodeJSInstaller>
              </installers>
            </hudson.tools.InstallSourceProperty>
          </properties>
        </jenkins.plugins.nodejs.tools.NodeJSInstallation>
      </installations>
    </jenkins.plugins.nodejs.tools.NodeJSInstallation_-DescriptorImpl>
  io.fabric8.jenkins.openshiftsync.GlobalPluginConfiguration.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <io.fabric8.jenkins.openshiftsync.GlobalPluginConfiguration plugin="openshift-sync@0.1-SNAPSHOT">
      <enabled>true</enabled>
      <jobNamePattern>.*</jobNamePattern>
      <namespace>${PROJECT_NAMESPACE}</namespace>
    </io.fabric8.jenkins.openshiftsync.GlobalPluginConfiguration>
  org.jenkinsci.main.modules.sshd.SSHD.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <org.jenkinsci.main.modules.sshd.SSHD>
      <port>-1</port>
    </org.jenkinsci.main.modules.sshd.SSHD>
  org.jenkinsci.plugins.workflow.libs.GlobalLibraries.xml: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <org.jenkinsci.plugins.workflow.libs.GlobalLibraries plugin="workflow-cps-global-lib@2.8">
      <libraries>
        <org.jenkinsci.plugins.workflow.libs.LibraryConfiguration>
          <name>fabric8</name>
          <retriever class="org.jenkinsci.plugins.workflow.libs.SCMSourceRetriever">
            <scm class="jenkins.plugins.git.GitSCMSource" plugin="git@3.6.0">
              <id>3e24ab0a-0b63-4ad4-bd94-9a1e1c8254c3</id>
              <remote>https://github.com/fabric8io/fabric8-pipeline-library</remote>
              <credentialsId></credentialsId>
              <traits>
                <jenkins.plugins.git.traits.BranchDiscoveryTrait/>
              </traits>
            </scm>
          </retriever>
          <defaultVersion>master</defaultVersion>
          <implicit>true</implicit>
          <allowVersionOverride>true</allowVersionOverride>
        </org.jenkinsci.plugins.workflow.libs.LibraryConfiguration>
      </libraries>
    </org.jenkinsci.plugins.workflow.libs.GlobalLibraries>
  config.xml.tpl: |-
    <?xml version='1.0' encoding='UTF-8'?>
    <hudson>
      <disabledAdministrativeMonitors/>
      <version>1.619</version>
      <numExecutors>5</numExecutors>
      <mode>NORMAL</mode>
      <useSecurity>true</useSecurity>
      <authorizationStrategy class="hudson.security.FullControlOnceLoggedInAuthorizationStrategy">
        <denyAnonymousReadAccess>false</denyAnonymousReadAccess>
      </authorizationStrategy>
      <securityRealm class="org.jenkinsci.plugins.oic.OicSecurityRealm" plugin="oic-auth@1.0">
        <clientId>fabric8-online-platform</clientId>
        <clientSecret>${KEYCLOAK_CLIENT_SECRET}</clientSecret>
        <tokenServerUrl>${KEYCLOAK_URL}/auth/realms/fabric8/protocol/openid-connect/token</tokenServerUrl>
        <authorizationServerUrl>${KEYCLOAK_URL}/auth/realms/fabric8/protocol/openid-connect/auth</authorizationServerUrl>
        <userNameField>email</userNameField>
        <scopes>openid email</scopes>
      </securityRealm>
      <disableRememberMe>false</disableRememberMe>
      <projectNamingStrategy class="jenkins.model.ProjectNamingStrategy$DefaultProjectNamingStrategy"/>
      <workspaceDir>${ITEM_ROOTDIR}/workspace</workspaceDir>
      <buildsDir>${ITEM_ROOTDIR}/builds</buildsDir>
      <markupFormatter class="hudson.markup.RawHtmlMarkupFormatter" plugin="antisamy-markup-formatter@1.5">
        <disableSyntaxHighlighting>false</disableSyntaxHighlighting>
      </markupFormatter>
      <jdks/>
      <viewsTabBar class="hudson.views.DefaultViewsTabBar"/>
      <myViewsTabBar class="hudson.views.DefaultMyViewsTabBar"/>
      <clouds>
        <org.csanchez.jenkins.plugins.kubernetes.KubernetesCloud plugin="kubernetes@0.5-SNAPSHOT">
          <name>kubernetes</name>
          <templates>
            <org.csanchez.jenkins.plugins.kubernetes.PodTemplate>
              <name>base</name>
              <label>base</label>
              <serviceAccount>jenkins</serviceAccount>
              <remoteFs>/home/jenkins/workspace</remoteFs>
              <rootFs>/home/jenkins/</rootFs>
              <instanceCap>5</instanceCap>
              <envVars>
                <org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
                  <key>KUBERNETES_MASTER</key>
                  <value>https://kubernetes.default</value>
                </org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
                <org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
                  <key>KUBERNETES_TRUST_CERTIFICATES</key>
                  <value>true</value>
                </org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
                <org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
                  <key>KUBERNETES_NAMESPACE</key>
                  <value>${KUBERNETES_NAMESPACE}</value>
                </org.csanchez.jenkins.plugins.kubernetes.PodEnvVar>
              </envVars>
              <containers>
                <org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate>
                  <name>jnlp</name>
                  <image>fabric8/jenkins-jnlp-client:3.0.47</image>
                  <command></command>
                  <args>${computer.jnlpmac} ${computer.name}</args>
                  <workingDir>/home/jenkins/</workingDir>
                </org.csanchez.jenkins.plugins.kubernetes.ContainerTemplate>
              </containers>
            </org.csanchez.jenkins.plugins.kubernetes.PodTemplate>
          </templates>
          <serverUrl>https://kubernetes.default</serverUrl>
          <skipTlsVerify>false</skipTlsVerify>
          <jenkinsUrl>http://jenkins:80</jenkinsUrl>
          <jenkinsTunnel>jenkins-jnlp:50000</jenkinsTunnel>
          <containerCap>5</containerCap>
          <retentionTimeout>5</retentionTimeout>
        </org.csanchez.jenkins.plugins.kubernetes.KubernetesCloud>
      </clouds>
      <quietPeriod>1</quietPeriod>
      <scmCheckoutRetryCount>0</scmCheckoutRetryCount>
      <views>
        <hudson.model.AllView>
          <owner class="hudson" reference="../../.."/>
          <name>all</name>
          <filterExecutors>false</filterExecutors>
          <filterQueue>false</filterQueue>
          <properties/>
        </hudson.model.AllView>
      </views>
      <primaryView>all</primaryView>
      <slaveAgentPort>50000</slaveAgentPort>
      <label>master</label>
      <nodeProperties/>
      <globalNodeProperties/>
      <noUsageStatistics>true</noUsageStatistics>
    </hudson>